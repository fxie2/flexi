## Parameter file options \label{sec:parameterfile}

A ``parameter.ini`` file is needed to control the code. An overview of all options in the parameter file can be generated by following command in the terminal:

~~~~~~~
./flexi --help
~~~~~~~

Generally following types are used:

~~~~~~~
INTEGER = 1
REAL    = 1.23456
LOGICAL = T         ! True
LOGICAL =           ! False
STRING  = Flexi
VECTOR  = (/1.0,2.0,3.0/)  
~~~~~~~

The concept of the parameter file is described as followed:

* each single line is saved and examined for specific variable names
* the examination is case-insensitive
* comments can be set with symbol "!" in front of the text

~~~~~~~ {.Fortran}
! commented text
~~~~~~~

* numbers can also be set by using "pi"

~~~~~~~
vector = (/1,2Pi,3Pi/)
~~~~~~~

* the order of defined variables is with one exception generally indifferent, but it is preferable to group similar variables
* the order becomes important only by modifying boundary conditions, if you want to modify a specific boundary by addressing its name, the related boundary type has to be defined

~~~~~~~
BoundaryName=inflow         ! BC_Name defined in mesh file
BoundaryType=(/2,0,0,0/)
BoundaryName=outflow        ! BC_Name defined in mesh file
BoundaryType=(/2,0,0,0/)
~~~~~~~

The following tables describe the main configuration options which can used in the parameter file.

-----------------------------------------------------------------------------------------
**MPI**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
GroupSize                            0 Define size of MPI subgroups, used to e.g. perform  
                                       grouped IO, where group master collects and outputs  
                                       data.  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**IO_HDF5**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
gatheredWrite                        F Set true to activate gathered HDF5 IO for parallel  
                                       computations. Only local group masters will write  
                                       data after gathering from local slaves.  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**Interpolation**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
N                                      Polynomial degree of computation to represent to  
                                       solution  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**Restart**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
ResetTime                            F Override solution time to t=0 on restart.  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**Output**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
NVisu                                  Polynomial degree at which solution is sampled for  
                                       visualization.  
                                        
NOut                                -1 Polynomial degree at which solution is written.  
                                       -1: NOut=N, >0: NOut  
                                        
ProjectName                            Name of the current simulation (mandatory).  
                                        
Logging                              F Write log files containing debug output.  
                                        
ErrorFiles                           T Write error files containing error output.  
                                        
OutputFormat                         0 File format for visualization. <=0: no  
                                       visualization, 1: Tecplot binary, 2: Tecplot  
                                       ASCII, 3: Paraview binary. Note: Tecplot output is  
                                       currently unavailable due to licensing issues.  
                                        
doPrintStatusLine                    F Print: percentage of time, ...  
                                        
ColoredOutput                        T Colorize stdout  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**Mesh**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
MeshFile                               (relative) path to mesh file (mandatory).  
                                        
useCurveds                           T Controls usage of high-order information in mesh.  
                                       Turn off to discard high-order data and treat  
                                       curved meshes as linear meshes.  
                                        
interpolateFromTree                  T For non-conforming meshes, built by refinement  
                                       from a tree structure, the metrics can be built  
                                       from the tree geometry if it is contained in the  
                                       mesh. Can improve free-stream preservation.  
                                        
meshScale                        1.000 Scale the mesh by this factor (shrink/enlarge).  
                                        
meshdeform                           F Apply simple sine-shaped deformation on Cartesian  
                                       mesh (for testing).  
                                        
crossProductMetrics                  F Compute mesh metrics using cross product form.  
                                       Caution: in this case free-stream preservation is  
                                       only guaranteed for N=3*NGeo.  
                                        
debugmesh                            0 Output file with visualization and debug  
                                       information for the mesh. 0: no visualization, 3:  
                                       Paraview binary  
                                        
BoundaryName                           Names of boundary conditions to be set (must be  
                                       present in the mesh!).For each BoundaryName a  
                                       BoundaryType needs to be specified.  
                                        
BoundaryType                           Type of boundary conditions to be set. Format:  
                                       (BC_TYPE,BC_STATE)  
                                        
writePartitionInfo                   F Write information about MPI partitions into a  
                                       file.  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**Equation**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
IniExactFunc                           Exact function to be used for computing initial  
                                       solution.  
                                        
AdvVel                                 Advection velocity (v1,v2,v3) required for  
                                       exactfunction CASE(2,21,4,8)  
                                        
MachShock                        1.500 Parameter required for CASE(6)  
                                        
PreShockDens                     1.000 Parameter required for CASE(6)  
                                        
IniRefState                            Refstate required for initialization.  
                                        
IniCenter                              Shu Vortex CASE(12) (x,y,z)  
                                        
IniAxis                                Shu Vortex CASE(12) (x,y,z)  
                                        
IniAmplitude                     0.200 Shu Vortex CASE(12)  
                                        
IniHalfwidth                     0.200 Shu Vortex CASE(12)  
                                        
UseNonDimensionalEqn                 F Set true to compute R and mu from bulk Mach  
                                       Reynolds (non-dimensional form).  
                                        
BulkMach                               Bulk Mach     (UseNonDimensionEqn=T)  
                                        
BulkReynolds                           Bulk Reynolds (UseNonDimensionEqn=T)  
                                        
kappa                            1.400 Heat capacity ratio / isentropic exponent  
                                        
R                              287.058 Specific gas constant  
                                        
Pr                               0.720 Prandtl number  
                                        
mu0                              0.000 Dynamic Viscosity  
                                        
Ts                             110.400 Sutherland's law for variable viscosity: Ts  
                                        
Tref                           280.000 Sutherland's law for variable viscosity: Tref  
                                        
ExpoSuth                         1.500 Sutherland's law for variable viscosity: Exponent  
                                        
RefState                               State(s) in primitive variables (density, velx,  
                                       vely, velz, pressure).  
                                        
BCStateFile                            File containing the reference solution on the  
                                       boundary to be used as BC.  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**Riemann**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
Riemann                             33 Riemann solver to be used. 1: Lax-Friedrichs, 2:  
                                       HLLC, 3: Roe, 33: Roe with entropy fix, 4: HLL, 5:  
                                       HLLE, 6: HLLEM  
                                        
RiemannBC                           -1 Riemann solver used for boundary conditions. -1:  
                                       same as inside the domain, for other options see  
                                       Riemann.  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**Filter**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
FilterType                           0 Type of filter to be applied. 0: none, 1: cut-off  
                                       filter, 2: modal Hesthaven filter  
                                        
NFilter                                Cut-off mode (FilterType==1)  
                                        
HestFilterParam                        Parameters for Hesthaven filter (FilterType=2)  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**Overintegration**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
OverintegrationType                  0 Type of over-integration. 0: none, 1: cut-off  
                                       filter, 2: conservative cut-off filter, 3:  
                                       Selective over-integration of advective fluxes  
                                        
NUnder                                 Polynomial degree to which solution is filtered  
                                       (OverintegrationType == 1 or 2  
                                        
NOver                                  Polynomial degree for computing and integrating  
                                       the advective fluxes (OverintegrationType == 3)  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**Lifting**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
doWeakLifting                        F Set true to perform lifting in weak form.  
                                        
doConservativeLifting                F Set true to compute the volume contribution to the  
                                       gradients in conservative form, i.e. deriving the  
                                       solution multiplied by the metric terms instead of  
                                       deriving the solution and multiplying by the  
                                       metrics.  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**Sponge**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
SpongeLayer                          F Turn on to employ sponge regions for reducing  
                                       reflections at boundaries.  
                                        
SpongeDistance                         Length of sponge ramp. The sponge will have  
                                       maximum strength at the end of the ramp and after  
                                       that point.  
                                        
damping                          0.010 Damping factor of sponge (0..1).  
                                        
SpongeShape                          1 Set shape of sponge: 1: Cartesian /  
                                       vector-aligned, 2: cylindrical  
                                        
xStart                                 Coordinates of start position of sponge ramp  
                                       (shape=1) or center (shape=2).  
                                        
SpongeViz                            F Turn on to write a visualization file of the  
                                       sponge region and strength.  
                                        
SpongeDir                              Direction vector of the sponge ramp (SpongeShape=1)  
                                        
SpongeRadius                           Radius of the sponge zone (SpongeShape=2)  
                                        
SpongeAxis                             Axis vector of cylindrical sponge (SpongeShape=2)  
                                        
SpongeBaseFlow                       1 Type of baseflow to be used for sponge. 1: fixed  
                                       state, 2: exact function, 3: read baseflow file,  
                                       4: temporally varying, solution adaptive Pruett  
                                       baseflow  
                                        
SpongeRefState                         Index of Refstate in ini-file (SpongeBaseFlow=1)  
                                        
SpongeExactFunc                        Index of exactfunction (SpongeBaseFlow=2)  
                                        
SpongeBaseFlowFile                     Flexi solution (e.g. TimeAvg) file from which  
                                       baseflow is read.  
                                        
tempFilterWidth                        Temporal filter witdh used to advance Pruett  
                                       baseflow in time.)  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**TimeDisc**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
TimeDiscMethod          CarpenterRK4-5 Specifies the type of time-discretization to be  
                                       used,  
                                       e.g. the name of a specific Runge-Kutta scheme.  
                                       Possible values:  
                                       standardrk3-3,  
                                       carpenterrk4-5,  
                                       niegemannrk4-14,  
                                       toulorgerk4-8c,  
                                       toulorgerk3-7c,  
                                       toulorgerk4-8f,  
                                       ketchesonrk4-20,  
                                       ketchesonrk4-18  
                                        
TEnd                                   End time of the simulation (mandatory).  
                                        
CFLScale                               Scaling factor for the theoretical CFL number,  
                                       typical range 0.1..1.0 (mandatory)  
                                        
DFLScale                               Scaling factor for the theoretical DFL number,  
                                       typical range 0.1..1.0 (mandatory)  
                                        
maxIter                             -1 Stop simulation when specified number of time steps  
                                       has been performed.  
                                        
NCalcTimeStepMax                     1 Compute dt at least after every Nth time step.  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**Analyze**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
CalcErrorNorms                       T Set true to compute L2 and LInf error norms at  
                                       analyze step.  
                                        
AnalyzeToFile                        F Set true to output result of error norms to a file  
                                       (CalcErrorNorms=T)  
                                        
Analyze_dt                       0.000 Specifies time interval at which analysis  
                                       routines are called.  
                                        
nWriteData                           1 Interval as multiple of Analyze_dt at which HDF5  
                                       files (e.g. State,TimeAvg,Fluc) are written.  
                                        
NAnalyze                               Polynomial degree at which analysis is performed  
                                       (e.g. for L2 errors). Default: 2*N.  
                                        
doMeasureFlops                       T Set true to measure flop count, if compiled with  
                                       PAPI.  
                                        
-----------------------------------------------------------------------------------------
 
-----------------------------------------------------------------------------------------
**AnalyzeEquation**
----------------------- -------------- --------------------------------------------------
**Variable**            **Default**    **Description**
                                                                                
CalcBodyForces                       F Set true to compute body forces at walls  
                                        
CalcBulkState                        F Set true to compute the flows bulk quantities  
                                        
CalcMeanFlux                         F Set true to compute mean flux through boundaries  
                                        
CalcWallVelocity                     F Set true to compute velocities at wall boundaries  
                                        
CalcTotalStates                      F Set true to compute total states (e.g. Tt,pt)  
                                        
CalcTimeAverage                      F Set true to compute time averages  
                                        
WriteBodyForces                      T Set true to write bodyforces to file  
                                        
WriteBulkState                       T Set true to write bulk state to file  
                                        
WriteMeanFlux                        T Set true to write mean flux to file  
                                        
WriteWallVelocity                    T Set true to write wall velocities file  
                                        
WriteTotalStates                     T Set true to write total states to file  
                                        
VarNameAvg                             Names of variables to be time-averaged  
                                        
VarNameFluc                            Names of variables for which Flucs (time-averaged  
                                       square of the variable) should be computed.  
                                       Required for computing actual fluctuations.  
                                        
-----------------------------------------------------------------------------------------
 
